<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <title>jLiveTime Demo</title>
        <meta name="description" content="jLiveTime Demo">
        <link rel="stylesheet" href="style.css">
        <script src="../vendor/jquery-1.8.2.js"></script>
        <script src="../src/jlivetime.js"></script>
        <script type="text/javascript">
            // little hack to enable html5 tags in old browsers
            document.createElement('time');
        </script>
    </head>
    <body>
        <a href="https://github.com/benjamine/jLiveTime" id="fork_me">
            <img alt="Fork me on GitHub" src="http://s3.amazonaws.com/github/ribbons/forkme_right_darkblue_121621.png">
        </a>
        <h1>jLiveTime Demo</h1>
        <div class="controlpanel">
            <a href="?">reset</a>
            <a class="timestop" href="javascript:void(0);">stop</a>
            <div class="addtime">
                <span>add</span>
                <a href="javascript:void(0);" data-seconds="1">1 second</a>
                <a href="javascript:void(0);" data-seconds="60">1 minute</a>
                <a href="javascript:void(0);" data-seconds="3600">1 hour</a>
                <a href="javascript:void(0);" data-seconds="86400">1 day</a>
                <a href="javascript:void(0);" data-seconds="2592000">1 month</a>
            </div>
            <div class="addtime">
                <span>substract</span>                
                <a href="javascript:void(0);" data-seconds="-1">1 second</a>
                <a href="javascript:void(0);" data-seconds="-60">1 minute</a>
                <a href="javascript:void(0);" data-seconds="-3600">1 hour</a>
                <a href="javascript:void(0);" data-seconds="-86400">1 day</a>
                <a href="javascript:void(0);" data-seconds="-2592000">1 month</a>
            </div>
        </div>
        <div class="examples">
            <h2>Examples</h2>
            <div>
                <time datetime="2012-11-16T10:43:50Z" data-time-label="#fulldate" data-time-tooltip>loading</time> <a class="removedatetime" href="javascript:void(0);">remove</a>
            </div>
            <div>
                <time datetime="2012-11-16T10:43:50Z" data-time-label="#shortdate" data-time-tooltip>loading</time> <a class="removedatetime" href="javascript:void(0);">remove</a>
            </div>
            <div>
                <time datetime="2012-11-16T10:43:50Z" data-time-label="eeee d at H:mm" data-time-tooltip>loading</time> <a class="removedatetime" href="javascript:void(0);">remove</a>
            </div>
            <div>
                <time datetime="2012-11-16T10:43:50Z" data-time-tooltip>
                    <span data-time-label="#_in"></span>
                    <span data-time-label="td_h" class="number"></span> hours, 
                    <span data-time-label="d_mm" class="number"></span> minutes
                    <span data-time-label="d_ss" class="number"></span> seconds
                    <span data-time-label="#ago"></span>
                </time> <a class="removedatetime" href="javascript:void(0);">remove</a>
            </div>
            <div>
                <time datetime="2012-11-16T10:43:50Z" data-time-label data-time-tooltip>loading</time> <a class="removedatetime" href="javascript:void(0);">remove</a>
            </div>
            <div>
                <time datetime="2012-11-16T10:43:50Z" data-time-label="#humanized" data-time-tooltip>loading</time> <a class="removedatetime" href="javascript:void(0);">remove</a>
            </div>
            <div>
                <time datetime="2012-11-16T10:43:50Z" data-time-label="#milliseconds" data-time-tooltip>loading</time> <a class="removedatetime" href="javascript:void(0);">remove</a>
            </div>
            <div>
                <time datetime="2012-11-16T10:43:50Z" data-duration="12000" data-time-label="#customwithduration" data-time-tooltip>loading</time> <a class="removedatetime" href="javascript:void(0);">remove</a>
            </div>
            <div>
                <time datetime="2012-11-16T10:43:50Z" data-time-label="#custom" data-time-tooltip>loading</time> <a class="removedatetime" href="javascript:void(0);">remove</a>
            </div>
            <div>
                <time datetime="2012-11-16T10:43:50Z" data-time-label="#custom2" data-time-tooltip>loading</time> <a class="removedatetime" href="javascript:void(0);">remove</a>
            </div>
            <div>
                <time datetime="2012-11-16T10:43:50Z" data-time-label="#custom3" data-time-tooltip>loading</time> <a class="removedatetime" href="javascript:void(0);">remove</a>
            </div>
            <h2>Live Test</h2>
            <div class="livetest">
                format expression: <input class="livetest-input" type="text" value="td_hh:d_mm:d_ss"><br/>
                <time datetime="2012-11-16T10:43:50Z" data-time-label="#livetest" data-time-tooltip>loading</time>
                <div class="format-help">
                    <ul>
                        <li>Year: yyyy => 2012</li>
                        <li>Month: M, MM, MMM, MMMM => 2, 02, Feb, February</li>
                        <li>Day of Month: d, dd => 8, 08</li>
                        <li>Weekday: e, ee, eee, eeee => 3, We, Wed, Wednesday</li>
                        <li>Hours: h, hh, H, HH => 1, 01, 13, 13</li>
                        <li>Minutes: m, mm => 9, 09</li>
                        <li>Seconds: s, ss => 5, 05</li>
                        <li>Milliseconds: f, ff, fff => 2, 02, 002</li>
                        <li>am/pm: t, tt => p, pm</li>
                        <li><b>d_*</b> distance</li>
                        <li><b>td_*</b> total distance</li>
                        <li><b>end_d_*</b> distance to end time</li>
                        <li><b>end_td_*</b> total distance to end time</li>
                    </ul>
                </div>
            </div>
        </div>
        <div class="localtimeoffsetinfo">
            your machine clock is <time class="localtimeoffsetseconds">0</time> seconds off
        </div>
        <script type="text/javascript">
            $(function() {

                $.livetime.options.serverTimeUrl = 'empty.txt';

                $.livetime.options.formats.livetest = "td_hh:d_mm:d_ss";

                $.livetime.options.formats.customwithduration = [
                    [-20, '#fulldate'],
                    [-5, 'will start in a few seconds'],
                    [0, 'will start in less than 5 seconds'],
                    ['end-5', 'playing (end_td_s seconds remaining)'],
                    ['end', 'playing (about to finish)'],
                    ['end+60', 'finished'],
                    ['finished (end_td_m minutes ago)']
                ];

                $.livetime.options.formats.custom = [
                    [-120, 'td_m minutes remaining'],
                    [-30, 'td_s seconds remaining'],
                    [-15, 'in a moment'],
                    [-5, 'td_s seconds remaining'],
                    [-4, 'Four!'],
                    [-3, '<b>THREE!</b>'],
                    [-2, '<b>TWO!</b>'],
                    [-1, '<b>ONE!</b>'],
                    [0, '<big><b>ZERO!</b></big>'],
                    [3, 'Preparing'],
                    [5, 'Almost ready'],
                    [10, 'Working'],
                    [14, 'Almost complete'],
                    ['Completed']
                ];

                var bars = [];
                for (var i=-30; i<30; i++) {
                    bars.push([i, new Array(Math.abs(i)).join(i>0 ? '*':'@')]);
                }
                bars.push(['END']);
                $.livetime.options.formats.custom2 = bars;

                $.livetime.options.formats.custom3 = [
                    [0, 'Upcoming'],
                    ['Done']
                ];

                // set all timestamp to 20s in the futute
                $('[datetime]').attr('datetime', new Date().getTime()+20000
                    -new Date().getTimezoneOffset()*60000);

                $('.examples').on('refreshComplete', function(e, data){
                    if (data.htmlChanged && data.nextRefreshMs > 100) {
                        var root = $(e.target);
                        var labels = root.find('[data-time-label]');
                        if (root.is('[data-time-label]')) {
                            labels = labels.add(root);
                        }
                        labels.addClass('timer-tick');
                            setTimeout(function(){
                                labels.removeClass('timer-tick');
                            },80);
                    }
                    if ($.livetime.localTimeOffset) {
                        $('.localtimeoffsetseconds').text(Math.floor($.livetime.localTimeOffset/1000));
                    }
                    
                });

                $('.examples').livetime();

                $('.addtime a').click(function(){
                    $('[datetime]').attr('datetime', parseInt($('[datetime]').attr('datetime')||0) +
                        parseInt($(this).data('seconds'))*1000);
                    $('.examples').livetime();
                });
                $('.timestop').click(function(){
                    $('.examples').livetime(false);
                });
                $('.examples .removedatetime').click(function(){
                    $(this).parent().remove();
                });

                $('.livetest-input').on('change, keyup', function(){
                    $.livetime.options.formats.livetest = $(this).val();
                    $('.livetest time').livetime();
                });

            });
        </script>
        <footer>
            <a href="https://github.com/benjamine/jLiveTime">Download jLiveTime</a><br>
        </footer>
    </body>
</html>